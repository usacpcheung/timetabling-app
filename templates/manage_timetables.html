{% extends "base.html" %}
{% block title %}Manage Timetables{% endblock %}
{% from 'components/table.html' import Table %}
{% block content %}
<h1 class="text-brand-700 text-2xl mb-4">Manage Saved Timetables</h1>
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
<ul class="list-none p-0 my-4 text-red-500">
    {% for category, msg in messages %}
    <li class="{{ category }}">{{ msg }}</li>
    {% endfor %}
</ul>
{% endif %}
{% endwith %}
{% if dates %}
<form method="post" action="{{ url_for('delete_timetables') }}" data-confirm="Delete selected timetables?" class="mb-4">
{% call Table() %}
<thead class="bg-brand-50"><tr><th>Date</th><th>Select</th></tr></thead>
<tbody>
{% for d in dates %}
<tr><td>{{ d }}</td><td><input type="checkbox" name="dates" value="{{ d }}"></td></tr>
{% endfor %}
</tbody>
{% endcall %}
<button type="submit" class="bg-brand-500 hover:bg-brand-700 text-white px-3 py-1 rounded mt-2">Delete Selected</button>
</form>
<form method="post" action="{{ url_for('delete_timetables') }}" data-confirm="Delete all timetables?">
    <input type="hidden" name="clear_all" value="1">
    <button type="submit" class="bg-brand-500 hover:bg-brand-700 text-white px-3 py-1 rounded">Clear All</button>
</form>
{% else %}
<p>No timetables saved.</p>
{% endif %}
<p class="mt-4"><a href="{{ url_for('index') }}" class="text-brand-500 hover:text-brand-700">Home</a></p>
{% endblock %}
