<!-- Configuration page with a long form for teachers, students, groups and settings -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Configuration</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@4.1.11/index.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.css">
</head>
<body class="bg-emerald-50 min-h-screen">
    <div class="max-w-4xl mx-auto mt-10 p-6">
    <h1 class="text-2xl text-emerald-900 font-semibold mb-4 text-center">Configuration</h1>
    <ul class="flex justify-center text-lg text-center text-emerald-700 border-b border-emerald-200 dark:text-emerald-300 dark:border-emerald-700 mb-6" role="tablist">
        <li class="me-2">
            <a href="{{ url_for('index') }}" class="inline-block p-4 border-b-2 rounded-t-lg text-lg {% if request.endpoint == 'index' %}border-emerald-500 text-emerald-700{% else %}border-transparent hover:text-emerald-600 hover:border-emerald-300 dark:hover:text-emerald-300{% endif %}">Home</a>
        </li>
        <li class="me-2">
            <a href="{{ url_for('config') }}" class="inline-block p-4 border-b-2 rounded-t-lg text-lg {% if request.endpoint == 'config' %}border-emerald-500 text-emerald-700{% else %}border-transparent hover:text-emerald-600 hover:border-emerald-300 dark:hover:text-emerald-300{% endif %}">Edit Configuration</a>
        </li>
        <li class="me-2">
            <a href="{{ url_for('attendance') }}" class="inline-block p-4 border-b-2 rounded-t-lg text-lg {% if request.endpoint == 'attendance' %}border-emerald-500 text-emerald-700{% else %}border-transparent hover:text-emerald-600 hover:border-emerald-300 dark:hover:text-emerald-300{% endif %}">View Attendance</a>
        </li>
        <li class="me-2">
            <a href="{{ url_for('manage_timetables') }}" class="inline-block p-4 border-b-2 rounded-t-lg text-lg {% if request.endpoint == 'manage_timetables' %}border-emerald-500 text-emerald-700{% else %}border-transparent hover:text-emerald-600 hover:border-emerald-300 dark:hover:text-emerald-300{% endif %}">Manage Timetables</a>
        </li>
    </ul>
    {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
    <ul id="flash-messages" class="flashes mb-4 text-center">
        {% for category, msg in messages %}
        <li class="{{ category }}">{{ msg }}</li>
        {% endfor %}
    </ul>
    {% endif %}
    {% endwith %}
<form method="post" class="space-y-6">
<div id="config-accordion" data-accordion="open" data-active-classes="bg-emerald-300" data-inactive-classes="text-grey-900" class="mb-4">
    <!-- General settings -->
    <h2 id="heading-general">
        <button type="button" class="flex items-center justify-between w-full p-4 font-medium text-left border border-b-0 border-emerald-200 rounded-t-xl hover:bg-emerald-300"
            data-accordion-target="#body-general" aria-expanded="true" aria-controls="body-general">
            <span>General</span>
            <svg data-accordion-icon class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
            </svg>
        </button>
    </h2>
    <div id="body-general" class="p-4 border border-b-0 border-emerald-200">
        <fieldset class="grid gap-4">
            <label class="block">Slots per day:
                <input type="number" name="slots_per_day" value="{{ config['slots_per_day'] }}" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
            <label class="block">Slot duration (minutes):
                <input type="number" name="slot_duration" value="{{ config['slot_duration'] }}" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
            <div id="slot-times" class="space-y-2">
                {% for i in range(config['slots_per_day']) %}
                <label class="block">Slot {{ i + 1 }} start:
                    <input type="time" name="slot_start_{{ i + 1 }}" value="{{ slot_times[i] if slot_times|length > i else '' }}" class="border border-emerald-300 rounded-lg p-2.5 w-full">
                </label>
                {% endfor %}
            </div>
            <label class="block">Min lessons per student:
                <input type="number" name="min_lessons" value="{{ config['min_lessons'] }}" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
            <label class="block">Max lessons per student:
                <input type="number" name="max_lessons" value="{{ config['max_lessons'] }}" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
            <label class="block">Min lessons per teacher:
                <input type="number" name="teacher_min_lessons" value="{{ config['teacher_min_lessons'] }}" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
            <label class="block">Max lessons per teacher:
                <input type="number" name="teacher_max_lessons" value="{{ config['teacher_max_lessons'] }}" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
            <label class="flex items-center gap-2">Allow repeated lessons?
                <input type="checkbox" name="allow_repeats" {% if config['allow_repeats'] %}checked{% endif %} class="w-4 h-4 text-emerald-600 bg-emerald-100 border-emerald-300 rounded focus:ring-emerald-500">
            </label>
            <label class="flex items-center gap-2">Allow different teachers per subject?
                <input type="checkbox" name="allow_multi_teacher" {% if config['allow_multi_teacher'] %}checked{% endif %} class="w-4 h-4 text-emerald-600 bg-emerald-100 border-emerald-300 rounded focus:ring-emerald-500">
            </label>
            <label class="block">Max repeats per teacher/subject:
                <input type="number" name="max_repeats" value="{{ config['max_repeats'] }}" min="1" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
            <label class="flex items-center gap-2">Allow consecutive repeat slots?
                <input type="checkbox" name="allow_consecutive" {% if config['allow_consecutive'] %}checked{% endif %} class="w-4 h-4 text-emerald-600 bg-emerald-100 border-emerald-300 rounded focus:ring-emerald-500">
            </label>
            <label class="flex items-center gap-2">Prefer consecutive repeats?
                <input type="checkbox" name="prefer_consecutive" {% if config['prefer_consecutive'] %}checked{% endif %} class="w-4 h-4 text-emerald-600 bg-emerald-100 border-emerald-300 rounded focus:ring-emerald-500">
            </label>
            <label class="block">Consecutive preference weight:
                <input type="number" name="consecutive_weight" value="{{ config['consecutive_weight'] }}" min="1" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
            <label class="flex items-center gap-2">Require all subjects?
                <input type="checkbox" name="require_all_subjects" {% if config['require_all_subjects'] %}checked{% endif %} class="w-4 h-4 text-emerald-600 bg-emerald-100 border-emerald-300 rounded focus:ring-emerald-500">
            </label>
            <label class="flex items-center gap-2">Use attendance priority?
                <input type="checkbox" name="use_attendance_priority" {% if config['use_attendance_priority'] %}checked{% endif %} class="w-4 h-4 text-emerald-600 bg-emerald-100 border-emerald-300 rounded focus:ring-emerald-500">
            </label>
            <label class="block">Attendance weight:
                <input type="number" name="attendance_weight" value="{{ config['attendance_weight'] }}" min="1" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
            <label class="block">Well-attended weight:
                <input type="number" name="well_attend_weight" value="{{ config['well_attend_weight'] }}" min="0" step="0.1" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
            <label class="block">Group weight:
                <input type="number" name="group_weight" value="{{ config['group_weight'] }}" min="1" step="0.1" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
            <label class="flex items-center gap-2">Balance teacher load?
                <input type="checkbox" name="balance_teacher_load" {% if config['balance_teacher_load'] %}checked{% endif %} class="w-4 h-4 text-emerald-600 bg-emerald-100 border-emerald-300 rounded focus:ring-emerald-500">
            </label>
            <label class="block">Balance weight:
                <input type="number" name="balance_weight" value="{{ config['balance_weight'] }}" min="1" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
        </fieldset>
    </div>
    <!-- Subjects -->
    <h2 id="heading-subjects">
        <button type="button" class="flex items-center justify-between w-full p-4 font-medium text-left border border-b-0 border-emerald-200 hover:bg-emerald-300"
            data-accordion-target="#body-subjects" aria-expanded="false" aria-controls="body-subjects">
            <span>Subjects</span>
            <svg data-accordion-icon class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
            </svg>
        </button>
    </h2>
    <div id="body-subjects" class="hidden p-4 border border-b-0 border-emerald-200">
        <fieldset class="space-y-4">
            {% for sub in subjects %}
            <input type="hidden" name="subject_id" value="{{ sub['id'] }}">
            <label class="block">Name:
                <input type="text" name="subject_name_{{ sub['id'] }}" value="{{ sub['name'] }}" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
            <label class="block">Min %:
                <input type="number" name="subject_min_{{ sub['id'] }}" value="{{ sub['min_percentage'] if sub['min_percentage'] is not none else 0 }}" min="0" max="100" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
            <label class="flex items-center gap-2">Delete?
                <input type="checkbox" name="subject_delete" value="{{ sub['id'] }}" class="w-4 h-4 text-emerald-600 bg-emerald-100 border-emerald-300 rounded focus:ring-emerald-500">
            </label>
            {% endfor %}
            <label class="block">New Subject:
                <input type="text" name="new_subject_name" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
            <label class="block">Min %:
                <input type="number" name="new_subject_min" min="0" max="100" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
        </fieldset>
    </div>
    <!-- Teachers -->
    <h2 id="heading-teachers">
        <button type="button" class="flex items-center justify-between w-full p-4  font-medium text-left border border-b-0 border-emerald-200 hover:bg-emerald-300"
            data-accordion-target="#body-teachers" aria-expanded="false" aria-controls="body-teachers">
            <span>Teachers</span>
            <svg data-accordion-icon class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
            </svg>
        </button>
    </h2>
    <div id="body-teachers" class="hidden p-4 border border-b-0 border-emerald-200">
        <fieldset class="space-y-4">
            {% for t in teachers %}
            <input type="hidden" name="teacher_id" value="{{ t['id'] }}">
            <label class="block">Name:
                <input type="text" name="teacher_name_{{ t['id'] }}" value="{{ t['name'] }}" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
            <label class="block">Subjects:
                <select multiple name="teacher_subjects_{{ t['id'] }}" class="border border-emerald-300 rounded-lg p-2.5 w-full">
                    {% for sub in subjects %}
                    <option value="{{ sub['name'] }}" {% if sub['name'] in json.loads(t['subjects']) %}selected{% endif %}>{{ sub['name'] }}</option>
                    {% endfor %}
                </select>
            </label>
            <label class="block">Min:
                <input type="number" name="teacher_min_{{ t['id'] }}" value="{{ t['min_lessons'] if t['min_lessons'] is not none else '' }}" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
            <label class="block">Max:
                <input type="number" name="teacher_max_{{ t['id'] }}" value="{{ t['max_lessons'] if t['max_lessons'] is not none else '' }}" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
            <label class="flex items-center gap-2">Delete?
                <input type="checkbox" name="teacher_delete_{{ t['id'] }}" value="1" class="w-4 h-4 text-emerald-600 bg-emerald-100 border-emerald-300 rounded focus:ring-emerald-500">
            </label>
            {% endfor %}
            <label class="block">New Name:
                <input type="text" name="new_teacher_name" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
            <label class="block">Subjects:
                <select multiple name="new_teacher_subjects" class="border border-emerald-300 rounded-lg p-2.5 w-full">
                    {% for sub in subjects %}
                    <option value="{{ sub['name'] }}">{{ sub['name'] }}</option>
                    {% endfor %}
                </select>
            </label>
            <label class="block">Min:
                <input type="number" name="new_teacher_min" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
            <label class="block">Max:
                <input type="number" name="new_teacher_max" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
        </fieldset>
    </div>
    <!-- Students -->
    <h2 id="heading-students">
        <button type="button" class="flex items-center justify-between w-full p-4  font-medium text-left border border-b-0 border-emerald-200 hover:bg-emerald-300"
            data-accordion-target="#body-students" aria-expanded="false" aria-controls="body-students">
            <span>Students</span>
            <svg data-accordion-icon class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
            </svg>
        </button>
    </h2>
    <div id="body-students" class="hidden p-4 border border-b-0 border-emerald-200">
        <fieldset class="space-y-4">
            {% for s in students %}
            <input type="hidden" name="student_id" value="{{ s['id'] }}">
            <label class="block">Name:
                <input type="text" name="student_name_{{ s['id'] }}" value="{{ s['name'] }}" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
            <label class="block">Subjects:
                <select multiple name="student_subjects_{{ s['id'] }}" class="border border-emerald-300 rounded-lg p-2.5 w-full">
                    {% for sub in subjects %}
                    <option value="{{ sub['name'] }}" {% if sub['name'] in json.loads(s['subjects']) %}selected{% endif %}>{{ sub['name'] }}</option>
                    {% endfor %}
                </select>
            </label>
            <label class="flex items-center gap-2">Needs lessons?
                <input type="checkbox" name="student_active_{{ s['id'] }}" value="1" {% if s['active'] %}checked{% endif %} class="w-4 h-4 text-emerald-600 bg-emerald-100 border-emerald-300 rounded focus:ring-emerald-500">
            </label>
            <label class="block">Forbidden Teachers:
                <select multiple name="student_block_{{ s['id'] }}" class="border border-emerald-300 rounded-lg p-2.5 w-full">
                    {% for t in teachers %}
                    <option value="{{ t['id'] }}" {% if t['id'] in block_map.get(s['id'], []) %}selected{% endif %}>{{ t['name'] }}</option>
                    {% endfor %}
                </select>
            </label>
            <label class="flex items-center gap-2">Delete?
                <input type="checkbox" name="student_delete_{{ s['id'] }}" value="1" class="w-4 h-4 text-emerald-600 bg-emerald-100 border-emerald-300 rounded focus:ring-emerald-500">
            </label>
            {% endfor %}
            <label class="block">New Name:
                <input type="text" name="new_student_name" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
            <label class="block">Subjects:
                <select multiple name="new_student_subjects" class="border border-emerald-300 rounded-lg p-2.5 w-full">
                    {% for sub in subjects %}
                    <option value="{{ sub['name'] }}">{{ sub['name'] }}</option>
                    {% endfor %}
                </select>
            </label>
            <label class="block">Forbidden Teachers:
                <select multiple name="new_student_block" class="border border-emerald-300 rounded-lg p-2.5 w-full">
                    {% for t in teachers %}
                    <option value="{{ t['id'] }}">{{ t['name'] }}</option>
                    {% endfor %}
                </select>
            </label>
        </fieldset>
    </div>
    <!-- Groups -->
    <h2 id="heading-groups">
        <button type="button" class="flex items-center justify-between w-full p-4  font-medium text-left border border-b-0 border-emerald-200 hover:bg-emerald-300"
            data-accordion-target="#body-groups" aria-expanded="false" aria-controls="body-groups">
            <span>Groups</span>
            <svg data-accordion-icon class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
            </svg>
        </button>
    </h2>
    <div id="body-groups" class="hidden p-4 border border-b-0 border-emerald-200">
        <fieldset class="space-y-4">
            {% for g in groups %}
            <input type="hidden" name="group_id" value="{{ g['id'] }}">
            <label class="block">Name:
                <input type="text" name="group_name_{{ g['id'] }}" value="{{ g['name'] }}" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
            <label class="block">Subjects:
                <select multiple name="group_subjects_{{ g['id'] }}" class="border border-emerald-300 rounded-lg p-2.5 w-full">
                    {% for sub in subjects %}
                    <option value="{{ sub['name'] }}" {% if sub['name'] in json.loads(g['subjects']) %}selected{% endif %}>{{ sub['name'] }}</option>
                    {% endfor %}
                </select>
            </label>
            <label class="block">Members:
                <select multiple name="group_members_{{ g['id'] }}" class="border border-emerald-300 rounded-lg p-2.5 w-full">
                    {% for s in students %}
                    <option value="{{ s['id'] }}" {% if s['id'] in group_map.get(g['id'], []) %}selected{% endif %}>{{ s['name'] }}</option>
                    {% endfor %}
                </select>
            </label>
            <label class="flex items-center gap-2">Delete?
                <input type="checkbox" name="group_delete" value="{{ g['id'] }}" class="w-4 h-4 text-emerald-600 bg-emerald-100 border-emerald-300 rounded focus:ring-emerald-500">
            </label>
            {% endfor %}
            <label class="block">New Group Name:
                <input type="text" name="new_group_name" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
            <label class="block">Subjects:
                <select multiple name="new_group_subjects" class="border border-emerald-300 rounded-lg p-2.5 w-full">
                    {% for sub in subjects %}
                    <option value="{{ sub['name'] }}">{{ sub['name'] }}</option>
                    {% endfor %}
                </select>
            </label>
            <label class="block">Members:
                <select multiple name="new_group_members" class="border border-emerald-300 rounded-lg p-2.5 w-full">
                    {% for s in students %}
                    <option value="{{ s['id'] }}">{{ s['name'] }}</option>
                    {% endfor %}
                </select>
            </label>
        </fieldset>
    </div>
    <!-- Unavailability -->
    <h2 id="heading-unavail">
        <button type="button" class="flex items-center justify-between w-full p-4  font-medium text-left border border-b-0 border-emerald-200 hover:bg-emerald-300"
            data-accordion-target="#body-unavail" aria-expanded="false" aria-controls="body-unavail">
            <span>Teacher Unavailability</span>
            <svg data-accordion-icon class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
            </svg>
        </button>
    </h2>
    <div id="body-unavail" class="hidden p-4 border border-b-0 border-emerald-200">
        <fieldset class="space-y-4">
            {% for u in unavailable %}
            <input type="hidden" name="unavail_id" value="{{ u['id'] }}">
            <span class="block">{{ u['teacher_name'] }} - Slot {{ u['slot'] + 1 }}</span>
            <label class="flex items-center gap-2">Delete?
                <input type="checkbox" name="unavail_delete" value="{{ u['id'] }}" class="w-4 h-4 text-emerald-600 bg-emerald-100 border-emerald-300 rounded focus:ring-emerald-500">
            </label>
            {% endfor %}
            <label class="block">Teacher:
                <select name="new_unavail_teacher" id="new_unavail_teacher" class="border border-emerald-300 rounded-lg p-2.5 w-full">
                    {% for t in teachers %}
                    <option value="{{ t['id'] }}">{{ t['name'] }}</option>
                    {% endfor %}
                </select>
            </label>
            <label class="block">Slot:
                <input type="number" name="new_unavail_slot" id="new_unavail_slot" min="1" max="{{ config['slots_per_day'] }}" class="border border-emerald-300 rounded-lg p-2.5 w-full">
            </label>
        </fieldset>
    </div>
    <!-- Fixed assignments -->
    <h2 id="heading-assign">
        <button type="button" class="flex items-center justify-between w-full p-4 font-medium text-left border border-b-0 border-emerald-200 rounded-b-xl hover:bg-emerald-300"
            data-accordion-target="#body-assign" aria-expanded="false" aria-controls="body-assign">
            <span>Fixed Assignments</span>
            <svg data-accordion-icon class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
            </svg>
        </button>
    </h2>
    <div id="body-assign" class="hidden p-4 border border-emerald-200 rounded-b-xl">
        <fieldset class="space-y-4">
            {% for a in assignments %}
            <input type="hidden" name="assign_id" value="{{ a['id'] }}">
            <span class="block">{% if a['student_name'] %}{{ a['student_name'] }}{% else %}{{ a['group_name'] }}{% endif %} - {{ a['subject'] }} with {{ a['teacher_name'] }} at Slot {{ a['slot'] + 1 }}</span>
            <label class="flex items-center gap-2">Delete?
                <input type="checkbox" name="assign_delete" value="{{ a['id'] }}" class="w-4 h-4 text-emerald-600 bg-emerald-100 border-emerald-300 rounded focus:ring-emerald-500">
            </label>
            {% endfor %}
            <label class="block">Student:
                <select name="new_assign_student" id="new_assign_student" class="border border-emerald-300 rounded-lg p-2.5 w-full">
                    <option value="">-- None --</option>
                    {% for s in students %}
                    <option value="{{ s['id'] }}">{{ s['name'] }}</option>
                    {% endfor %}
                </select>
            </label>
            <label class="block">Group:
                <select name="new_assign_group" id="new_assign_group" class="border border-emerald-300 rounded-lg p-2.5 w-full">
                    <option value="">-- None --</option>
                    {% for g in groups %}
                    <option value="{{ g['id'] }}">{{ g['name'] }}</option>
                    {% endfor %}
                </select>
            </label>
            <label class="block">Teacher:
                <select name="new_assign_teacher" id="new_assign_teacher" class="border border-emerald-300 rounded-lg p-2.5 w-full">
                    {% for t in teachers %}
                    <option value="{{ t['id'] }}">{{ t['name'] }}</option>
                    {% endfor %}
                </select>
            </label>
            <label class="block">Subject:
                <select name="new_assign_subject" id="new_assign_subject" class="border border-emerald-300 rounded-lg p-2.5 w-full">
                    <option value="">-- Select --</option>
                </select>
            </label>
            <label class="block">Slot:
                <select name="new_assign_slot" id="new_assign_slot" data-total-slots="{{ config['slots_per_day'] }}" class="border border-emerald-300 rounded-lg p-2.5 w-full">
                    <option value="">-- Select --</option>
                </select>
            </label>
        </fieldset>
    </div>
</div>
        <button type="submit" class="w-full bg-emerald-500 text-white border rounded-md px-3 py-2 hover:bg-emerald-600 transition">Save</button>
    </form>

    <form method="post" action="{{ url_for('reset_db') }}" id="reset-db-form" class="mt-4">
        <button type="submit" class="w-full bg-red-500 text-white border rounded-md px-3 py-2 hover:bg-red-600 transition">Reset Database</button>
    </form>
    <script id="teacher-data" type="application/json">{{ teacher_map | tojson }}</script>
    <script id="student-data" type="application/json">{{ student_map | tojson }}</script>
    <!-- JSON blobs provide data for the JavaScript code below -->
    <script id="group-data" type="application/json">{{ group_subj_map | tojson }}</script>
    <script id="unavail-data" type="application/json">{{ unavail_map | tojson }}</script>
    <script id="assign-data" type="application/json">{{ assign_map | tojson }}</script>
    <script id="slot-times-data" type="application/json">{{ slot_times | tojson }}</script>
    <script src="{{ url_for('static', filename='config.js') }}"></script>
    <script src="{{ url_for('static', filename='ui.js') }}"></script>
    <script src="{{ url_for('static', filename='main.js') }}"></script>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.js"></script>
</body>
</html>
