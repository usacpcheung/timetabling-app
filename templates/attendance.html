<!-- Displays attendance statistics -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Attendance Report</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='dist/app.css') }}">
    <style>
        body.attendance-page { background-color: #ecfdf5; }
        .attendance-page .title-color { color: #064e3b; }
        .attendance-page .tab-menu { color: #047857; border-color: #a7f3d0; }
        .attendance-page .tab-menu a { border-color: transparent; }
        .attendance-page .tab-menu a:hover { color: #059669; border-color: #6ee7b7; }
        .attendance-page .tab-menu a.active { border-color: #10b981; color: #047857; }
        .attendance-page table thead th { background-color: #84E1BC !important; }
        .attendance-page table tbody tr { background-color: #ffffff !important; }
    </style>
</head>
<body class="attendance-page min-h-screen">
    <div class="max-w-4xl mx-auto mt-10 p-6">
        <h1 class="text-2xl font-semibold mb-4 text-center title-color">Attendance Report</h1>
        <ul class="flex justify-center text-lg text-center border-b mb-6 tab-menu" role="tablist">
            <li class="me-2">
                <a href="{{ url_for('index') }}" class="inline-block p-4 border-b-2 rounded-t-lg text-lg {% if request.endpoint == 'index' %}active{% else %}inactive{% endif %}">Home</a>
            </li>
            <li class="me-2">
                <a href="{{ url_for('config') }}" class="inline-block p-4 border-b-2 rounded-t-lg text-lg {% if request.endpoint == 'config' %}active{% else %}inactive{% endif %}">Edit Configuration</a>
            </li>
            <li class="me-2">
                <a href="{{ url_for('attendance') }}" class="inline-block p-4 border-b-2 rounded-t-lg text-lg {% if request.endpoint == 'attendance' %}active{% else %}inactive{% endif %}">View Attendance</a>
            </li>
            <li class="me-2">
                <a href="{{ url_for('manage_timetables') }}" class="inline-block p-4 border-b-2 rounded-t-lg text-lg {% if request.endpoint == 'manage_timetables' %}active{% else %}inactive{% endif %}">Manage Timetables</a>
            </li>
        </ul>
        <h2 class="text-lg font-medium mb-2">Active Students</h2>
        <div class="overflow-x-auto mb-6">
        <table id="active-table">
            <thead>
                <tr>
                    <th scope="col" class="px-4 py-2">
                        <span class="flex items-center">
                            Student
                            <svg class="w-4 h-4 ms-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8 15 4 4 4-4m0-6-4-4-4 4"/>
                            </svg>
                        </span>
                    </th>
                    <th scope="col" class="px-4 py-2">
                        <span class="flex items-center">
                            Subject
                            <svg class="w-4 h-4 ms-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8 15 4 4 4-4m0-6-4-4-4 4"/>
                            </svg>
                        </span>
                    </th>
                    <th scope="col" class="px-4 py-2">
                        <span class="flex items-center">
                            Lessons
                            <svg class="w-4 h-4 ms-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8 15 4 4 4-4m0-6-4-4-4 4"/>
                            </svg>
                        </span>
                    </th>
                    <th scope="col" class="px-4 py-2">
                        <span class="flex items-center">
                            Percentage
                            <svg class="w-4 h-4 ms-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8 15 4 4 4-4m0-6-4-4-4 4"/>
                            </svg>
                        </span>
                    </th>
                </tr>
            </thead>
            <tbody>
                {% for sid, info in active_attendance.items() %}
                    {% for subject, stats in info.subjects.items() %}
                <tr>
                    <td class="px-4 py-2">{{ info.name }}</td>
                    <td class="px-4 py-2">{{ subject }}</td>
                    <td class="px-4 py-2">{{ stats.count }}</td>
                    <td class="px-4 py-2">{{ '%.2f'|format(stats.percentage) }}%</td>
                </tr>
                    {% endfor %}
                {% endfor %}
            </tbody>
        </table>
        </div>

        {% if inactive_attendance %}
        <h2 class="text-lg font-medium mb-2">Inactive Students</h2>
        <div class="overflow-x-auto mb-6">
        <table id="inactive-table">
            <thead>
                <tr>
                    <th scope="col" class="px-4 py-2">
                        <span class="flex items-center">
                            Student
                            <svg class="w-4 h-4 ms-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8 15 4 4 4-4m0-6-4-4-4 4"/>
                            </svg>
                        </span>
                    </th>
                    <th scope="col" class="px-4 py-2">
                        <span class="flex items-center">
                            Subject
                            <svg class="w-4 h-4 ms-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8 15 4 4 4-4m0-6-4-4-4 4"/>
                            </svg>
                        </span>
                    </th>
                    <th scope="col" class="px-4 py-2">
                        <span class="flex items-center">
                            Lessons
                            <svg class="w-4 h-4 ms-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8 15 4 4 4-4m0-6-4-4-4 4"/>
                            </svg>
                        </span>
                    </th>
                    <th scope="col" class="px-4 py-2">
                        <span class="flex items-center">
                            Percentage
                            <svg class="w-4 h-4 ms-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8 15 4 4 4-4m0-6-4-4-4 4"/>
                            </svg>
                        </span>
                    </th>
                </tr>
            </thead>
            <tbody>
                {% for sid, info in inactive_attendance.items() %}
                    {% for subject, stats in info.subjects.items() %}
                <tr>
                    <td class="px-4 py-2">{{ info.name }}</td>
                    <td class="px-4 py-2">{{ subject }}</td>
                    <td class="px-4 py-2">{{ stats.count }}</td>
                    <td class="px-4 py-2">{{ '%.2f'|format(stats.percentage) }}%</td>
                </tr>
                    {% endfor %}
                {% endfor %}
            </tbody>
        </table>
        </div>
        {% endif %}

        <h2 class="text-lg font-medium mb-2">Deleted Students</h2>
        <div class="overflow-x-auto mb-6">
        <table id="deleted-table">
            <thead>
                <tr>
                    <th scope="col" class="px-4 py-2">
                        <span class="flex items-center">
                            Student
                            <svg class="w-4 h-4 ms-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8 15 4 4 4-4m0-6-4-4-4 4"/>
                            </svg>
                        </span>
                    </th>
                    <th scope="col" class="px-4 py-2">
                        <span class="flex items-center">
                            Subject
                            <svg class="w-4 h-4 ms-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8 15 4 4 4-4m0-6-4-4-4 4"/>
                            </svg>
                        </span>
                    </th>
                    <th scope="col" class="px-4 py-2">
                        <span class="flex items-center">
                            Lessons
                            <svg class="w-4 h-4 ms-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8 15 4 4 4-4m0-6-4-4-4 4"/>
                            </svg>
                        </span>
                    </th>
                    <th scope="col" class="px-4 py-2">
                        <span class="flex items-center">
                            Percentage
                            <svg class="w-4 h-4 ms-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8 15 4 4 4-4m0-6-4-4-4 4"/>
                            </svg>
                        </span>
                    </th>
                    <th scope="col" class="px-4 py-2">
                        <span class="flex items-center">
                            First Date
                            <svg class="w-4 h-4 ms-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8 15 4 4 4-4m0-6-4-4-4 4"/>
                            </svg>
                        </span>
                    </th>
                    <th scope="col" class="px-4 py-2">
                        <span class="flex items-center">
                            Last Date
                            <svg class="w-4 h-4 ms-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m8 15 4 4 4-4m0-6-4-4-4 4"/>
                            </svg>
                        </span>
                    </th>
                </tr>
            </thead>
            <tbody>
                {% for sid, info in deleted_attendance.items() %}
                    {% for subject, stats in info.subjects.items() %}
                <tr>
                    <td class="px-4 py-2">{{ info.name }}</td>
                    <td class="px-4 py-2">{{ subject }}</td>
                    <td class="px-4 py-2">{{ stats.count }}</td>
                    <td class="px-4 py-2">{{ '%.2f'|format(stats.percentage) }}%</td>
                    <td class="px-4 py-2">{{ info.first_date }}</td>
                    <td class="px-4 py-2">{{ info.last_date }}</td>
                </tr>
                    {% endfor %}
                {% endfor %}
            </tbody>
        </table>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/simple-datatables@9.0.3" defer></script>
    <script src="{{ url_for('static', filename='vendor/flowbite.min.js') }}" defer></script>
    <script src="{{ url_for('static', filename='ui.js') }}"></script>
    <script src="{{ url_for('static', filename='main.js') }}"></script>
    <script src="{{ url_for('static', filename='attendance.js') }}" defer></script>
</body>
</html>
