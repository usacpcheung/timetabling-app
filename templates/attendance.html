<!-- Displays attendance statistics -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Attendance Report</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.css">
</head>
<body class="bg-emerald-50 min-h-screen">
    <div class="max-w-2xl mx-auto mt-10 p-6">
        <h1 class="text-2xl text-emerald-900 font-semibold mb-4 text-center">Attendance Report</h1>
        <ul class="flex justify-center text-sm font-medium text-center text-emerald-700 border-b border-emerald-200 dark:text-emerald-300 dark:border-emerald-700 mb-6" role="tablist">
            <li class="me-2">
                <a href="{{ url_for('index') }}" class="inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:text-emerald-600 hover:border-emerald-300 dark:hover:text-emerald-300">Home</a>
            </li>
            <li class="me-2">
                <a href="{{ url_for('config') }}" class="inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:text-emerald-600 hover:border-emerald-300 dark:hover:text-emerald-300">Edit Configuration</a>
            </li>
            <li class="me-2">
                <a href="{{ url_for('attendance') }}" class="inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:text-emerald-600 hover:border-emerald-300 dark:hover:text-emerald-300">View Attendance</a>
            </li>
            <li class="me-2">
                <a href="{{ url_for('manage_timetables') }}" class="inline-block p-4 border-b-2 border-transparent rounded-t-lg hover:text-emerald-600 hover:border-emerald-300 dark:hover:text-emerald-300">Manage Timetables</a>
            </li>
        </ul>
        <h2 class="text-lg font-medium mb-2">Active Students</h2>
        <div class="overflow-x-auto mb-6">
        <table id="active-table" class="w-full text-sm text-left text-emerald-700 dark:text-emerald-300 rounded-lg border border-emerald-200 overflow-hidden dark:border-emerald-700">
            <thead class="text-xs text-emerald-800 uppercase bg-emerald-100 dark:bg-emerald-800 dark:text-emerald-200">
                <tr>
                    <th scope="col" class="px-4 py-2 border border-emerald-200 dark:border-emerald-700">Student</th>
                    <th scope="col" class="px-4 py-2 border border-emerald-200 dark:border-emerald-700">Subject</th>
                    <th scope="col" class="px-4 py-2 border border-emerald-200 dark:border-emerald-700">Lessons</th>
                    <th scope="col" class="px-4 py-2 border border-emerald-200 dark:border-emerald-700">Percentage</th>
                </tr>
            </thead>
            <tbody>
                {% for sid, info in active_attendance.items() %}
                    {% for subject, stats in info.subjects.items() %}
                <tr class="bg-white border-b border-emerald-100 dark:bg-emerald-900 dark:border-emerald-700">
                    <td class="px-4 py-2 border border-emerald-200 dark:border-emerald-700">{{ info.name }}</td>
                    <td class="px-4 py-2 border border-emerald-200 dark:border-emerald-700">{{ subject }}</td>
                    <td class="px-4 py-2 border border-emerald-200 dark:border-emerald-700">{{ stats.count }}</td>
                    <td class="px-4 py-2 border border-emerald-200 dark:border-emerald-700">{{ '%.2f'|format(stats.percentage) }}%</td>
                </tr>
                    {% endfor %}
                {% endfor %}
            </tbody>
        </table>
        </div>

        <h2 class="text-lg font-medium mb-2">Deleted Students</h2>
        <div class="overflow-x-auto mb-6">
        <table id="deleted-table" class="w-full text-sm text-left text-emerald-700 dark:text-emerald-300 rounded-lg border border-emerald-200 overflow-hidden dark:border-emerald-700">
            <thead class="text-xs text-emerald-800 uppercase bg-emerald-100 dark:bg-emerald-800 dark:text-emerald-200">
                <tr>
                    <th scope="col" class="px-4 py-2 border border-emerald-200 dark:border-emerald-700">Student</th>
                    <th scope="col" class="px-4 py-2 border border-emerald-200 dark:border-emerald-700">Subject</th>
                    <th scope="col" class="px-4 py-2 border border-emerald-200 dark:border-emerald-700">Lessons</th>
                    <th scope="col" class="px-4 py-2 border border-emerald-200 dark:border-emerald-700">Percentage</th>
                    <th scope="col" class="px-4 py-2 border border-emerald-200 dark:border-emerald-700">First Date</th>
                    <th scope="col" class="px-4 py-2 border border-emerald-200 dark:border-emerald-700">Last Date</th>
                </tr>
            </thead>
            <tbody>
                {% for sid, info in deleted_attendance.items() %}
                    {% for subject, stats in info.subjects.items() %}
                <tr class="bg-white border-b border-emerald-100 dark:bg-emerald-900 dark:border-emerald-700">
                    <td class="px-4 py-2 border border-emerald-200 dark:border-emerald-700">{{ info.name }}</td>
                    <td class="px-4 py-2 border border-emerald-200 dark:border-emerald-700">{{ subject }}</td>
                    <td class="px-4 py-2 border border-emerald-200 dark:border-emerald-700">{{ stats.count }}</td>
                    <td class="px-4 py-2 border border-emerald-200 dark:border-emerald-700">{{ '%.2f'|format(stats.percentage) }}%</td>
                    <td class="px-4 py-2 border border-emerald-200 dark:border-emerald-700">{{ info.first_date }}</td>
                    <td class="px-4 py-2 border border-emerald-200 dark:border-emerald-700">{{ info.last_date }}</td>
                </tr>
                    {% endfor %}
                {% endfor %}
            </tbody>
        </table>
        </div>
        <p class="text-center"><a href="{{ url_for('index') }}" class="text-emerald-700 underline">Home</a></p>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.js"></script>
    <!-- Flowbite DataTable plugin built on top of Simple-DataTables -->
    <script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/umd/simple-datatables.js" defer></script>
    <script src="{{ url_for('static', filename='ui.js') }}"></script>
    <script src="{{ url_for('static', filename='main.js') }}"></script>
    <script src="{{ url_for('static', filename='attendance.js') }}"></script>
</body>
</html>
